{
  "name": "ai-proofreader",
  "displayName": "AI Proofreader",
  "description": "AI powered proofreading tools",
  "version": "1.7.0",
  "engines": {
    "vscode": "^1.85.0",
    "node": ">=18.12.1"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "ai-proofread.managePrompts",
        "title": "AI Proofreader: manage prompts"
      },
      {
        "command": "ai-proofread.prompts.new",
        "title": "新建提示词"
      },
      {
        "command": "ai-proofread.prompts.edit",
        "title": "编辑"
      },
      {
        "command": "ai-proofread.prompts.delete",
        "title": "删除"
      },
      {
        "command": "ai-proofread.splitFileByLength",
        "title": "AI Proofreader: split by length"
      },
      {
        "command": "ai-proofread.splitFileByTitle",
        "title": "AI Proofreader: split by title"
      },
      {
        "command": "ai-proofread.splitFileWithTitleContext",
        "title": "AI Proofreader: split by length with title context"
      },
      {
        "command": "ai-proofread.splitFileWithParagraphContext",
        "title": "AI Proofreader: split by length with paragraph context"
      },
      {
        "command": "ai-proofread.splitFileByTitleAndLength",
        "title": "AI Proofreader: split by title and length"
      },
      {
        "command": "ai-proofread.mergeTwoFiles",
        "title": "AI Proofreader: merge two files"
      },
      {
        "command": "ai-proofread.proofreadFile",
        "title": "AI Proofreader: proofread file"
      },
      {
        "command": "ai-proofread.proofreadSelection",
        "title": "AI Proofreader: proofread selection"
      },
      {
        "command": "ai-proofread.proofreadSelectionWithExamples",
        "title": "AI Proofreader: proofread selection with examples"
      },
      {
        "command": "ai-proofread.editProofreadingExamples",
        "title": "AI Proofreader: edit Proofreading examples"
      },
      {
        "command": "ai-proofread.splitIntoSentences",
        "title": "AI Proofreader: split into sentences"
      },
      {
        "command": "ai-proofread.diffItWithAnotherFile",
        "title": "AI Proofreader: diff it with another file"
      },
      {
        "command": "ai-proofread.searchSelectionInPDF",
        "title": "AI Proofreader: search selection in PDF"
      },
      {
        "command": "ai-proofread.convertDocxToMarkdown",
        "title": "AI Proofreader: convert docx to markdown"
      },
      {
        "command": "ai-proofread.convertPdfToMarkdown",
        "title": "AI Proofreader: convert PDF to markdown"
      },
      {
        "command": "ai-proofread.convertMarkdownToDocx",
        "title": "AI Proofreader: convert markdown to docx"
      },
      {
        "command": "ai-proofread.convertQuotes",
        "title": "AI Proofreader: convert quotes to Chinese"
      },
      {
        "command": "ai-proofread.formatParagraphs",
        "title": "AI Proofreader: format paragraphs"
      },
      {
        "command": "ai-proofread.markTitlesFromToc",
        "title": "AI Proofreader: mark titles from table of contents"
      },
      {
        "command": "ai-proofread.segmentFile",
        "title": "AI Proofreader: segment file"
      },
      {
        "command": "ai-proofread.segmentSelection",
        "title": "AI Proofreader: segment selection"
      },
      {
        "command": "ai-proofread.splitFile",
        "title": "AI Proofreader: split file"
      },
      {
        "command": "ai-proofread.openProofreadingPanel",
        "title": "AI Proofreader: open proofreading panel"
      },
      {
        "command": "ai-proofread.reopenResultPanel",
        "title": "AI Proofreader: reopen result panel"
      },
      {
        "command": "ai-proofread.citation.openView",
        "title": "AI Proofreader: verify citations"
      },
      {
        "command": "ai-proofread.citation.rebuildIndex",
        "title": "AI Proofreader: build citation reference index"
      },
      {
        "command": "ai-proofread.citation.verifySelection",
        "title": "AI Proofreader: verify selected citation"
      },
      {
        "command": "ai-proofread.citation.showDiff",
        "title": "diff citations vs references"
      },
      {
        "command": "ai-proofread.citation.searchInPdf",
        "title": "search citation in PDF"
      },
      {
        "command": "ai-proofread.checkWords",
        "title": "AI Proofreader: check words"
      },
      {
        "command": "ai-proofread.wordCheck.prevOccurrence",
        "title": "上一处"
      },
      {
        "command": "ai-proofread.wordCheck.nextOccurrence",
        "title": "下一处"
      },
      {
        "command": "ai-proofread.wordCheck.showNotes",
        "title": "查看说明"
      },
      {
        "command": "ai-proofread.wordCheck.revealCurrentAndAdvance",
        "title": "下一处"
      },
      {
        "command": "ai-proofread.wordCheck.applyReplaceForEntry",
        "title": "应用替换（当前条目）"
      },
      {
        "command": "ai-proofread.manageCustomTables",
        "title": "AI Proofreader: manage custom tables"
      },
      {
        "command": "ai-proofread.customTables.delete",
        "title": "删除"
      },
      {
        "command": "ai-proofread.customTables.moveUp",
        "title": "上移"
      },
      {
        "command": "ai-proofread.customTables.moveDown",
        "title": "下移"
      },
      {
        "command": "ai-proofread.customTables.loadTable",
        "title": "加载替换表"
      },
      {
        "command": "ai-proofread.dictCheckTypes.moveUp",
        "title": "上移"
      },
      {
        "command": "ai-proofread.dictCheckTypes.moveDown",
        "title": "下移"
      },
      {
        "command": "ai-proofread.tgsccCheckTypes.moveUp",
        "title": "上移"
      },
      {
        "command": "ai-proofread.tgsccCheckTypes.moveDown",
        "title": "下移"
      },
      {
        "command": "ai-proofread.numbering.check",
        "title": "AI Proofreader: check numbering hierarchy"
      },
      {
        "command": "ai-proofread.numbering.reveal",
        "title": "定位到文档"
      },
      {
        "command": "ai-proofread.numbering.markAsTitle",
        "title": "标记为 Markdown 标题"
      },
      {
        "command": "ai-proofread.numbering.promote",
        "title": "升级"
      },
      {
        "command": "ai-proofread.numbering.demote",
        "title": "降级"
      },
      {
        "command": "ai-proofread.numbering.toggleSimplifiedLevel",
        "title": "伸缩层级"
      },
      {
        "command": "ai-proofread.numbering.defineTitle",
        "title": "定义标题"
      },
      {
        "command": "ai-proofread.numbering.checkSegments",
        "title": "检查段内序号"
      },
      {
        "command": "ai-proofread.numberingSegments.toggleSimplifiedLevel",
        "title": "伸缩层级"
      },
      {
        "command": "ai-proofread.numbering.defineSegmentPattern",
        "title": "定义段内序号"
      }
    ],
    "configuration": {
      "title": "AI Proofread",
      "properties": {
        "ai-proofread.proofread.platform": {
          "order": 10,
          "type": "string",
          "enum": [
            "deepseek",
            "aliyun",
            "google",
            "ollama"
          ],
          "enumDescriptions": [
            "Deepseek开放平台",
            "阿里云百炼平台",
            "Google Gemini平台",
            "Ollama本地模型"
          ],
          "default": "deepseek",
          "description": "大模型服务平台选择"
        },
        "ai-proofread.apiKeys.deepseek": {
          "order": 11,
          "type": "string",
          "default": "",
          "description": "Deepseek开放平台 API 密钥"
        },
        "ai-proofread.proofread.models.deepseek": {
          "order": 12,
          "type": "string",
          "default": "deepseek-chat",
          "description": "Deepseek开放平台模型,如: deepseek-chat（推理模型deepseek-reasoner容易失败且费用高）"
        },
        "ai-proofread.apiKeys.aliyun": {
          "order": 13,
          "type": "string",
          "default": "",
          "description": "阿里云百炼平台 API 密钥"
        },
        "ai-proofread.proofread.models.aliyun": {
          "order": 14,
          "type": "string",
          "default": "qwen-max-2025-01-25",
          "description": "阿里云百炼平台模型,如: qwen3-max-preview, qwen-max-latest,qwen-max,  qwen-plus-latest, qwen-plus, deepseek-v3, (推理模型deepseek-r1容易失败且费用高)"
        },
        "ai-proofread.apiKeys.google": {
          "order": 15,
          "type": "string",
          "default": "",
          "description": "Google Gemini API 密钥"
        },
        "ai-proofread.proofread.models.google": {
          "order": 16,
          "type": "string",
          "default": "gemini-2.5-pro-exp-03-25",
          "description": "Google Gemini 平台模型,如: gemini-2.5-pro, gemini-2.5-flash, gemini-2.5-flash-lite"
        },
        "ai-proofread.apiKeys.ollama": {
          "order": 18,
          "type": "string",
          "default": "http://localhost:11434",
          "description": "Ollama本地模型服务地址，如: http://localhost:11434"
        },
        "ai-proofread.proofread.models.ollama": {
          "order": 19,
          "type": "string",
          "default": "gemma3:1b",
          "description": "Ollama本地模型名称,如: gemma3:1b, gemma3:4b, llama3.2:1b, llama3.2:3b, mistral:7b; 推理模型：qwen3:0.6b, qwen3:1.7b, qwen3:4b, deepseek-r1:1.5b"
        },
        "ai-proofread.proofread.disableThinking": {
          "order": 20,
          "type": "boolean",
          "default": true,
          "description": "禁用模型思考功能（一般语言文字校对建议禁用，以提高速度，充分利用模型知识。目前仅适用于Gemini 2.5系列模型，且无法在 Gemini 2.5 Pro 上停用）"
        },
        "ai-proofread.proofread.retryAttempts": {
          "order": 21,
          "type": "number",
          "default": 3,
          "minimum": 1,
          "maximum": 10,
          "description": "API调用失败时的重试次数，默认3次"
        },
        "ai-proofread.proofread.retryDelay": {
          "order": 22,
          "type": "number",
          "default": 1,
          "minimum": 0.1,
          "maximum": 10,
          "description": "重试间隔时间（秒），默认1秒"
        },
        "ai-proofread.proofread.timeout": {
          "order": 23,
          "type": "number",
          "default": 90,
          "minimum": 5,
          "maximum": 300,
          "description": "API请求超时时间（秒），默认90秒"
        },
        "ai-proofread.proofread.rpm": {
          "order": 24,
          "type": "number",
          "default": 60,
          "description": "每分钟最大请求数，默认60。Deepseek无限制，但服务器在高流量时会延迟，请注意观察；阿里云百炼qwen-max系列稳定版的rpm通常为600甚至更高，带日期的快照版通常为60"
        },
        "ai-proofread.proofread.maxConcurrent": {
          "order": 25,
          "type": "number",
          "default": 10,
          "description": "最大并发请求数，默认10"
        },
        "ai-proofread.proofread.temperature": {
          "order": 26,
          "type": "number",
          "default": 1,
          "description": "模型温度，取值范围是[0:2)，留空则使用模型默认温度，默认1.0"
        },
        "ai-proofread.proofread.promptRepetition": {
          "order": 27,
          "type": "string",
          "enum": [
            "none",
            "target",
            "all"
          ],
          "enumDescriptions": [
            "不重复",
            "仅重复要修改的目标文档（target）",
            "重复参考文档、语境和目标文档（完整对话流程）"
          ],
          "default": "none",
          "description": "提示词重复模式（基于谷歌研究：重复提示词可提高准确度。注意：会增加输入token，但可能提高校对准确度）"
        },
        "ai-proofread.prompts": {
          "order": 28,
          "type": "array",
          "default": [],
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "提示词名称"
              },
              "content": {
                "type": "string",
                "description": "提示词内容"
              }
            },
            "required": [
              "name",
              "content"
            ]
          },
          "description": "设置给大语言模型提示词及其名称。提示词中应对要处理的目标文本（target）、参考资料（reference）、上下文（context）进行说明。也可以通过命令管理"
        },
        "ai-proofread.convertQuotes": {
          "order": 40,
          "type": "boolean",
          "default": false,
          "description": "是否在校对后自动将拉丁半角引号转换为中文全角引号"
        },
        "ai-proofread.defaultSplitLength": {
          "order": 41,
          "type": "number",
          "default": 600,
          "minimum": 50,
          "description": "默认的文本切分长度（字符数）"
        },
        "ai-proofread.defaultTitleLevels": {
          "order": 42,
          "type": "array",
          "items": {
            "type": "number",
            "minimum": 1,
            "maximum": 6
          },
          "default": [
            2
          ],
          "description": "默认的标题切分级别（例如：[1,2] 表示按一级和二级标题切分）"
        },
        "ai-proofread.titleAndLengthSplit.threshold": {
          "order": 43,
          "type": "number",
          "default": 1000,
          "description": "标题加长度切分：段落长度阈值，超过此长度的段落将被切分"
        },
        "ai-proofread.titleAndLengthSplit.minLength": {
          "order": 44,
          "type": "number",
          "default": 120,
          "description": "标题加长度切分：最小长度，小于此长度的段落将被合并"
        },
        "ai-proofread.proofread.defaultContextLevel": {
          "order": 45,
          "type": "number",
          "default": 0,
          "description": "校对选中文本时，默认使用的标题级别作为上下文范围（0表示不使用）"
        },
        "ai-proofread.paragraphContextSplit.beforeParagraphs": {
          "order": 46,
          "type": "number",
          "default": 1,
          "description": "段落上下文切分模式：前文段落数"
        },
        "ai-proofread.paragraphContextSplit.afterParagraphs": {
          "order": 47,
          "type": "number",
          "default": 1,
          "description": "段落上下文切分模式：后文段落数"
        },
        "ai-proofread.alignment.windowSize": {
          "order": 48,
          "type": "number",
          "default": 10,
          "description": "句子对齐（生成勘误表）：搜索窗口大小（锚点左右各N个句子）"
        },
        "ai-proofread.alignment.ngramGranularity": {
          "order": 49,
          "type": "string",
          "enum": [
            "char",
            "word"
          ],
          "default": "char",
          "description": "相似度计算粒度：字级（默认）或词级（更语义化，需 jieba 分词，速度较慢）。"
        },
        "ai-proofread.alignment.similarityThreshold": {
          "order": 50,
          "type": "number",
          "default": 0.4,
          "description": "相似度阈值（0-1），影响句子对齐（勘误表）与引文核对，默认0.4，粒度选择word时可选0.6"
        },
        "ai-proofread.alignment.ngramSize": {
          "order": 50.1,
          "type": "number",
          "minimum": 1,
          "default": 2,
          "description": "相似度计算时的 N-gram 大小，影响句子对齐（勘误表）与引文核对。默认 2（bigram），粒度选择word时可选1（unigram）。"
        },
        "ai-proofread.alignment.offset": {
          "order": 51,
          "type": "number",
          "default": 1,
          "description": "句子对齐（生成勘误表）：锚点偏移量"
        },
        "ai-proofread.alignment.maxWindowExpansion": {
          "order": 52,
          "type": "number",
          "default": 3,
          "description": "句子对齐（生成勘误表）：最大窗口扩展倍数"
        },
        "ai-proofread.alignment.consecutiveFailThreshold": {
          "order": 53,
          "type": "number",
          "default": 3,
          "description": "句子对齐（生成勘误表）：连续失败阈值"
        },
        "ai-proofread.alignment.removeInnerWhitespace": {
          "order": 54,
          "type": "boolean",
          "default": true,
          "description": "句子对齐（生成勘误表）：相似度计算时是否忽略句中空白字符（默认是）。仅当通过命令面板等不弹窗方式执行对齐时使用此配置"
        },
        "ai-proofread.alignment.normalizeIgnoreDigits": {
          "order": 54.1,
          "type": "boolean",
          "default": false,
          "description": "句子对齐（生成勘误表）归一化：是否去掉阿拉伯数字（默认否，即保留）"
        },
        "ai-proofread.alignment.normalizeIgnoreLatin": {
          "order": 54.2,
          "type": "boolean",
          "default": false,
          "description": "句子对齐（生成勘误表）归一化：是否去掉拉丁字符（默认否，即保留）"
        },
        "ai-proofread.jieba.customDictPath": {
          "order": 54.5,
          "type": "string",
          "default": "",
          "description": "jieba 自定义词典路径。支持 ${workspaceFolder} 或绝对路径。格式：每行「词语 词频 词性（可选）」，如`北京大学 100000 ns`。以换行分隔，空行和 # 开头行忽略。留空则不加载。"
        },
        "ai-proofread.jieba.cutMode": {
          "order": 54.6,
          "type": "string",
          "enum": [
            "search",
            "default"
          ],
          "default": "search",
          "description": "词级相似度时的分词模式：search（默认，更细粒度，便于匹配不完整引文等）或 default（精确）。用于句子对齐、引文核对等。"
        },
        "ai-proofread.wordErrorCollector.clauseSimilarityThreshold": {
          "order": 54.7,
          "type": "number",
          "default": 0.4,
          "minimum": 0,
          "maximum": 1,
          "description": "常用词语错误收集：小句对齐相似度阈值（0-1）"
        },
        "ai-proofread.wordErrorCollector.delimiters": {
          "order": 54.8,
          "type": "string",
          "default": "，；。？！",
          "description": "常用词语错误收集：小句分隔符，如「，；。？！」表示在中文逗号、分号、句号、问号、叹号处切分"
        },
        "ai-proofread.citation.referencesPath": {
          "order": 55,
          "type": "string",
          "default": "",
          "description": "引文核对：参考文献根路径，支持 ${workspaceFolder} 或绝对路径，如 test/references"
        },
        "ai-proofread.citation.normalizeIgnorePunctuation": {
          "order": 56,
          "type": "boolean",
          "default": false,
          "description": "引文核对/对齐共用归一化：是否去掉标点（默认否，即保留）"
        },
        "ai-proofread.citation.normalizeIgnoreDigits": {
          "order": 57,
          "type": "boolean",
          "default": true,
          "description": "引文核对归一化：是否去掉阿拉伯数字（默认是，即去掉）"
        },
        "ai-proofread.citation.normalizeIgnoreLatin": {
          "order": 58,
          "type": "boolean",
          "default": true,
          "description": "引文核对归一化：是否去掉拉丁字符（默认是，即去掉）"
        },
        "ai-proofread.citation.normalizeIgnoreFootnoteMarkers": {
          "order": 59,
          "type": "boolean",
          "default": true,
          "description": "引文核对归一化：是否去掉 Markdown 注码 [^1] 和上标注码 ^1^（默认是，即去掉）"
        },
        "ai-proofread.citation.lenDeltaRatio": {
          "order": 60,
          "type": "number",
          "default": 0.2,
          "minimum": 0.01,
          "maximum": 1,
          "description": "引文核对：候选文献句长度允许偏离锚点句的比例。0.2 表示 ±20%，只把长度在「锚点×0.8」到「锚点×1.2」之间的文献句当作候选；越大候选越多、越慢，越小越快、可能漏匹配。"
        },
        "ai-proofread.citation.matchesPerCitation": {
          "order": 61,
          "type": "number",
          "default": 2,
          "description": "引文核对：每条引文显示的文献匹配数量（按相似度取前 N 条），默认 2"
        },
        "ai-proofread.citation.minCitationLength": {
          "order": 62,
          "type": "number",
          "default": 5,
          "minimum": 0,
          "description": "有效引文的最小长度（字符数）。仅当「忽略的引文」包含“过短的引文”时，小于此长度的引文会被忽略。默认 5。"
        },
        "ai-proofread.citation.ignoredCitationTypes": {
          "order": 63,
          "type": "array",
          "default": [
            "short"
          ],
          "description": "忽略的引文类型，不列入树视图。可选：\"short\" 过短的引文（长度小于「有效引文的最小长度」）、\"noFootnote\" 末尾没有注释标记的引文（无 [^1]、^1^、①② 等注码）。默认只忽略过短的引文。",
          "items": {
            "type": "string",
            "enum": [
              "short",
              "noFootnote"
            ]
          }
        },
        "ai-proofread.debug.enableConsoleLog": {
          "order": 90,
          "type": "boolean",
          "default": false,
          "description": "启用调试日志输出到控制台（会影响性能，仅在调试时启用。也可通过环境变量 AI_PROOFREAD_DEBUG=true 启用）"
        },
        "ai-proofread.wordCheck.replacePrefix": {
          "order": 91,
          "type": "string",
          "default": "",
          "description": "字词检查：应用替换时，替换结果前附加的标记（如【）。Ctrl+Enter 应用替换时使用此配置。"
        },
        "ai-proofread.wordCheck.replaceSuffix": {
          "order": 92,
          "type": "string",
          "default": "",
          "description": "字词检查：应用替换时，替换结果后附加的标记（如】）。Ctrl+Enter 应用替换时使用此配置。"
        },
        "ai-proofread.numbering.ignoreMarkdownPrefix": {
          "order": 93,
          "type": "boolean",
          "default": true,
          "description": "标题树检查：解析时是否忽略行首 # 以识别序号"
        },
        "ai-proofread.numbering.customLevels": {
          "order": 94,
          "type": "array",
          "default": [],
          "description": "标题树检查：用户自定义层级。每项含 level(1-8)、pattern(正则，需用捕获组包住序号)、name、sequenceType(序号类型可选 arabic | chinese-lower | chinese-upper | roman-upper | roman-lower | latin-upper | latin-lower | circled)。匹配时忽略原文空白。",
          "items": {
            "type": "object",
            "properties": {
              "level": { "type": "number" },
              "name": { "type": "string" },
              "pattern": { "type": "string" },
              "sequenceType": { "type": "string" }
            }
          }
        },
        "ai-proofread.numbering.customInlinePatterns": {
          "order": 95,
          "type": "array",
          "default": [],
          "description": "段内序号检查：用户自定义 pattern(正则，需用捕获组包住序号)、name(可选)、sequenceType(序号类型同前)。支持一行多匹配。",
          "items": {
            "type": "object",
            "properties": {
              "pattern": { "type": "string" },
              "name": { "type": "string" },
              "sequenceType": { "type": "string" }
            }
          }
        }
      }
    },
    "views": {
      "explorer": [
        {
          "id": "ai-proofread.prompts",
          "name": "prompts",
          "when": "aiProofread.showPromptsView"
        },
        {
          "id": "ai-proofread.dictCheckTypes",
          "name": "dict checks",
          "when": "aiProofread.showDictCheckTypesView"
        },
        {
          "id": "ai-proofread.tgsccCheckTypes",
          "name": "TGSCC checks",
          "when": "aiProofread.showTgsccCheckTypesView"
        },
        {
          "id": "ai-proofread.customTables",
          "name": "custom checks",
          "when": "aiProofread.showCustomTablesView"
        },
        {
          "id": "ai-proofread.wordCheck",
          "name": "words checked",
          "when": "aiProofread.showWordCheckView"
        },
        {
          "id": "ai-proofread.citation",
          "name": "citations",
          "when": "aiProofread.showCitationView"
        },
        {
          "id": "ai-proofread.numbering",
          "name": "标题树",
          "when": "aiProofread.showNumberingView"
        },
        {
          "id": "ai-proofread.numberingSegments",
          "name": "段内序号",
          "when": "aiProofread.showNumberingSegmentsView"
        }
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "ai-proofread.numbering.toggleSimplifiedLevel",
          "when": "view == ai-proofread.numbering",
          "group": "navigation"
        },
        {
          "command": "ai-proofread.numbering.defineTitle",
          "when": "view == ai-proofread.numbering",
          "group": "navigation"
        },
        {
          "command": "ai-proofread.numberingSegments.toggleSimplifiedLevel",
          "when": "view == ai-proofread.numberingSegments",
          "group": "navigation"
        },
        {
          "command": "ai-proofread.numbering.defineSegmentPattern",
          "when": "view == ai-proofread.numberingSegments",
          "group": "navigation"
        },
        {
          "command": "ai-proofread.prompts.new",
          "when": "view == ai-proofread.prompts",
          "group": "navigation"
        },
        {
          "command": "ai-proofread.customTables.loadTable",
          "when": "view == ai-proofread.customTables",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "ai-proofread.prompts.edit",
          "group": "prompts@1",
          "when": "view == ai-proofread.prompts && viewItem == promptUser"
        },
        {
          "command": "ai-proofread.prompts.delete",
          "group": "prompts@1",
          "when": "view == ai-proofread.prompts && viewItem == promptUser"
        },
        {
          "command": "ai-proofread.dictCheckTypes.moveUp",
          "group": "dictCheckTypes@1",
          "when": "view == ai-proofread.dictCheckTypes"
        },
        {
          "command": "ai-proofread.dictCheckTypes.moveDown",
          "group": "dictCheckTypes@1",
          "when": "view == ai-proofread.dictCheckTypes"
        },
        {
          "command": "ai-proofread.tgsccCheckTypes.moveUp",
          "group": "tgsccCheckTypes@1",
          "when": "view == ai-proofread.tgsccCheckTypes"
        },
        {
          "command": "ai-proofread.tgsccCheckTypes.moveDown",
          "group": "tgsccCheckTypes@1",
          "when": "view == ai-proofread.tgsccCheckTypes"
        },
        {
          "command": "ai-proofread.customTables.delete",
          "group": "customTables@1",
          "when": "view == ai-proofread.customTables && viewItem == customTableUser"
        },
        {
          "command": "ai-proofread.customTables.moveUp",
          "group": "customTables@2",
          "when": "view == ai-proofread.customTables"
        },
        {
          "command": "ai-proofread.customTables.moveDown",
          "group": "customTables@2",
          "when": "view == ai-proofread.customTables"
        },
        {
          "command": "ai-proofread.citation.showDiff",
          "group": "citation@1",
          "when": "view == ai-proofread.citation && viewItem == citationMatch"
        },
        {
          "command": "ai-proofread.citation.searchInPdf",
          "group": "citation@2",
          "when": "view == ai-proofread.citation && viewItem == citationMatch"
        },
        {
          "command": "ai-proofread.wordCheck.prevOccurrence",
          "group": "wordCheck@1",
          "when": "view == ai-proofread.wordCheck && viewItem == wordCheckEntry"
        },
        {
          "command": "ai-proofread.wordCheck.nextOccurrence",
          "group": "wordCheck@1",
          "when": "view == ai-proofread.wordCheck && viewItem == wordCheckEntry"
        },
        {
          "command": "ai-proofread.wordCheck.showNotes",
          "group": "wordCheck@2",
          "when": "view == ai-proofread.wordCheck && viewItem == wordCheckEntry"
        },
        {
          "command": "ai-proofread.wordCheck.applyReplaceForEntry",
          "group": "wordCheck@2",
          "when": "view == ai-proofread.wordCheck && viewItem == wordCheckEntry"
        },
        {
          "command": "ai-proofread.numbering.markAsTitle",
          "group": "numbering@2",
          "when": "view == ai-proofread.numbering && viewItem == numberingHeading"
        },
        {
          "command": "ai-proofread.numbering.promote",
          "group": "numbering@2",
          "when": "view == ai-proofread.numbering && viewItem == numberingHeading"
        },
        {
          "command": "ai-proofread.numbering.demote",
          "group": "numbering@2",
          "when": "view == ai-proofread.numbering && viewItem == numberingHeading"
        }
      ],
      "keybindings": [
        {
          "command": "ai-proofread.wordCheck.applyReplaceForEntry",
          "key": "ctrl+enter",
          "when": "view == ai-proofread.wordCheck && viewItem == wordCheckEntry"
        }
      ],
      "editor/context": [
        {
          "command": "ai-proofread.proofreadSelection",
          "group": "ai-proofread@11.0",
          "when": "editorHasSelection && (resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex)"
        },
        {
          "command": "ai-proofread.proofreadSelectionWithExamples",
          "group": "ai-proofread@11.1",
          "when": "editorHasSelection && (resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex)"
        },
        {
          "command": "ai-proofread.searchSelectionInPDF",
          "group": "ai-proofread@12",
          "when": "editorHasSelection && (resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex)"
        },
        {
          "command": "ai-proofread.citation.verifySelection",
          "group": "ai-proofread@12",
          "when": "editorHasSelection && (resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex)"
        },
        {
          "command": "ai-proofread.splitIntoSentences",
          "group": "ai-proofread@13",
          "when": "editorTextFocus && (resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex)"
        },
        {
          "command": "ai-proofread.convertQuotes",
          "group": "ai-proofread@13",
          "when": "resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex"
        },
        {
          "command": "ai-proofread.formatParagraphs",
          "group": "ai-proofread@13",
          "when": "resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex"
        },
        {
          "command": "ai-proofread.markTitlesFromToc",
          "group": "ai-proofread@13",
          "when": "resourceLangId == markdown"
        },
        {
          "command": "ai-proofread.numbering.check",
          "group": "ai-proofread@13",
          "when": "resourceLangId == markdown || resourceLangId == text || resourceLangId == plaintext"
        },
        {
          "command": "ai-proofread.diffItWithAnotherFile",
          "group": "ai-proofread@14",
          "when": "resourceLangId == json || resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex"
        },
        {
          "command": "ai-proofread.splitFile",
          "group": "ai-proofread@20",
          "when": "resourceLangId == markdown || resourceLangId == text || resourceLangId == context || resourceLangId == tex || resourceLangId == latex"
        },
        {
          "command": "ai-proofread.convertMarkdownToDocx",
          "group": "ai-proofread@21",
          "when": "resourceLangId == markdown"
        },
        {
          "command": "ai-proofread.proofreadFile",
          "group": "ai-proofread@31",
          "when": "resourceLangId == json"
        },
        {
          "command": "ai-proofread.mergeTwoFiles",
          "group": "ai-proofread@32",
          "when": "resourceLangId == json"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "parcel build src/extension.ts --no-source-maps && npm run copy-sqljs-dist && npm run copy-jieba-dist",
    "watch": "parcel watch src/extension.ts --no-source-maps",
    "package": "parcel build src/extension.ts --no-source-maps --no-cache && npm run copy-sqljs-dist && npm run copy-jieba-dist",
    "copy-sqljs-dist": "node -e \"const fs=require('fs'),p=require('path'); const src=p.join('node_modules','sql.js','dist'), dst='dist'; fs.copyFileSync(p.join(src,'sql-wasm.js'), p.join(dst,'sql-wasm.js')); fs.copyFileSync(p.join(src,'sql-wasm.wasm'), p.join(dst,'sql-wasm.wasm'));\"",
    "copy-jieba-dist": "node -e \"const fs=require('fs'),p=require('path'); const src=p.join('node_modules','jieba-wasm','pkg','nodejs'), dst='dist'; fs.copyFileSync(p.join(src,'jieba_rs_wasm.js'), p.join(dst,'jieba_rs_wasm.js')); fs.copyFileSync(p.join(src,'jieba_rs_wasm_bg.wasm'), p.join(dst,'jieba_rs_wasm_bg.wasm'));\"",
    "lint": "eslint src --ext ts",
    "package-vsix": "npx vsce package",
    "publish": "npx vsce publish"
  },
  "dependencies": {
    "@google/genai": "^0.7.0",
    "axios": "^1.8.4",
    "dotenv": "^16.4.7",
    "jieba-wasm": "^2.4.0",
    "sql.js": "^1.10.0"
  },
  "devDependencies": {
    "diff": "^7.0.0",
    "@eslint/config-array": "^0.19.2",
    "@eslint/object-schema": "^2.1.6",
    "@types/node": "^18.x",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.15.0",
    "@typescript-eslint/parser": "^6.15.0",
    "@vscode/vsce": "^3.3.2",
    "eslint": "^8.57.0",
    "glob": "^10.3.10",
    "parcel": "^2.11.0",
    "rimraf": "^5.0.5",
    "typescript": "^5.3.3"
  },
  "targets": {
    "main": {
      "context": "node",
      "includeNodeModules": {
        "vscode": false,
        "sql.js": false,
        "jieba-wasm": false
      },
      "sourceMap": false,
      "outputFormat": "commonjs",
      "optimize": true
    }
  },
  "icon": "icon.png",
  "publisher": "HuangFusyong",
  "repository": {
    "type": "git",
    "url": "https://github.com/Fusyong/ai-proofread-vscode-extension.git"
  }
}
